---
title: 正则表达式中的替代
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- regular expressions, substitutions
- replacement patterns
- metacharacters, substitutions
- .NET Framework regular expressions, substitutions
- constructs, substitutions
- substitutions
ms.assetid: d1f52431-1c7d-4dc6-8792-6b988256892e
ms.openlocfilehash: 6e5773c220dccd4d139b4f85e19b55048a64e7ef
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/02/2020
ms.locfileid: "84287999"
---
# <a name="substitutions-in-regular-expressions"></a><span data-ttu-id="daa9d-102">正则表达式中的替代</span><span class="sxs-lookup"><span data-stu-id="daa9d-102">Substitutions in Regular Expressions</span></span>
<span data-ttu-id="daa9d-103">替换是只能在替换模式中识别的语言元素。</span><span class="sxs-lookup"><span data-stu-id="daa9d-103">Substitutions are language elements that are recognized only within replacement patterns.</span></span> <span data-ttu-id="daa9d-104">它们使用正则表达式模式定义全部或部分用于替换输入字符串中的匹配文本的文本。</span><span class="sxs-lookup"><span data-stu-id="daa9d-104">They use a regular expression pattern to define all or part of the text that is to replace matched text in the input string.</span></span> <span data-ttu-id="daa9d-105">替换模式可以包含一个或多个替换以及本文字符。</span><span class="sxs-lookup"><span data-stu-id="daa9d-105">The replacement pattern can consist of one or more substitutions along with literal characters.</span></span> <span data-ttu-id="daa9d-106">提供替换模式以将拥有 <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> 参数的 `replacement` 方法重载至 <xref:System.Text.RegularExpressions.Match.Result%2A?displayProperty=nameWithType> 方法。</span><span class="sxs-lookup"><span data-stu-id="daa9d-106">Replacement patterns are provided to overloads of the <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> method that have a `replacement` parameter and to the <xref:System.Text.RegularExpressions.Match.Result%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="daa9d-107">该方法将匹配的模式替换为 `replacement` 参数定义的模式。</span><span class="sxs-lookup"><span data-stu-id="daa9d-107">The methods replace the matched pattern with the pattern that is defined by the `replacement` parameter.</span></span>  
  
 <span data-ttu-id="daa9d-108">.NET Framework 定义下表列出的替换元素。</span><span class="sxs-lookup"><span data-stu-id="daa9d-108">The .NET Framework defines the substitution elements listed in the following table.</span></span>  
  
|<span data-ttu-id="daa9d-109">替换</span><span class="sxs-lookup"><span data-stu-id="daa9d-109">Substitution</span></span>|<span data-ttu-id="daa9d-110">描述</span><span class="sxs-lookup"><span data-stu-id="daa9d-110">Description</span></span>|  
|------------------|-----------------|  
|<span data-ttu-id="daa9d-111">$ number </span><span class="sxs-lookup"><span data-stu-id="daa9d-111">$ *number*</span></span>|<span data-ttu-id="daa9d-112">包括替换字符串中的由 *number*标识的捕获组所匹配的最后一个子字符串，其中 *number* 是一个十进制值。</span><span class="sxs-lookup"><span data-stu-id="daa9d-112">Includes the last substring matched by the capturing group that is identified by *number*, where *number* is a decimal value, in the replacement string.</span></span> <span data-ttu-id="daa9d-113">有关详细信息，请参阅 [替换已编号的组](#substituting-a-numbered-group)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-113">For more information, see [Substituting a Numbered Group](#substituting-a-numbered-group).</span></span>|  
|<span data-ttu-id="daa9d-114">${ name  }</span><span class="sxs-lookup"><span data-stu-id="daa9d-114">${ *name* }</span></span>|<span data-ttu-id="daa9d-115">包括替换字符串中由 `(?<`*name*`> )` 指定的命名组所匹配的最后一个子字符串。</span><span class="sxs-lookup"><span data-stu-id="daa9d-115">Includes the last substring matched by the named group that is designated by `(?<`*name*`> )` in the replacement string.</span></span> <span data-ttu-id="daa9d-116">有关详细信息，请参阅 [替换命名组](#substituting-a-named-group)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-116">For more information, see [Substituting a Named Group](#substituting-a-named-group).</span></span>|  
|$$|<span data-ttu-id="daa9d-117">包括替换字符串中的单个“$”文本。</span><span class="sxs-lookup"><span data-stu-id="daa9d-117">Includes a single "$" literal in the replacement string.</span></span> <span data-ttu-id="daa9d-118">有关详细信息，请参阅 [替换“$”符号](#substituting-a--character)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-118">For more information, see [Substituting a "$" Symbol](#substituting-a--character).</span></span>|  
|$&|<span data-ttu-id="daa9d-119">包括替换字符串中整个匹配项的副本。</span><span class="sxs-lookup"><span data-stu-id="daa9d-119">Includes a copy of the entire match in the replacement string.</span></span> <span data-ttu-id="daa9d-120">有关详细信息，请参阅 [替换整个匹配项](#substituting-the-entire-match)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-120">For more information, see [Substituting the Entire Match](#substituting-the-entire-match).</span></span>|  
|$\`|<span data-ttu-id="daa9d-121">包括替换字符串中的匹配项前的输入字符串的所有文本。</span><span class="sxs-lookup"><span data-stu-id="daa9d-121">Includes all the text of the input string before the match in the replacement string.</span></span> <span data-ttu-id="daa9d-122">有关详细信息，请参阅 [替换匹配项前的文本](#substituting-the-text-before-the-match)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-122">For more information, see [Substituting the Text before the Match](#substituting-the-text-before-the-match).</span></span>|  
|<span data-ttu-id="daa9d-123">$'</span><span class="sxs-lookup"><span data-stu-id="daa9d-123">$'</span></span>|<span data-ttu-id="daa9d-124">包括替换字符串中的匹配项后的输入字符串的所有文本。</span><span class="sxs-lookup"><span data-stu-id="daa9d-124">Includes all the text of the input string after the match in the replacement string.</span></span> <span data-ttu-id="daa9d-125">有关详细信息，请参阅 [替换匹配项后的文本](#substituting-the-text-after-the-match)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-125">For more information, see [Substituting the Text after the Match](#substituting-the-text-after-the-match).</span></span>|  
|$+|<span data-ttu-id="daa9d-126">包括在替换字符串中捕获的最后一个组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-126">Includes the last group captured in the replacement string.</span></span> <span data-ttu-id="daa9d-127">有关详细信息，请参阅 [替换最后捕获的组](#substituting-the-last-captured-group)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-127">For more information, see [Substituting the Last Captured Group](#substituting-the-last-captured-group).</span></span>|  
|$\_|<span data-ttu-id="daa9d-128">包括替换字符串中的整个输入字符串。</span><span class="sxs-lookup"><span data-stu-id="daa9d-128">Includes the entire input string in the replacement string.</span></span> <span data-ttu-id="daa9d-129">有关详细信息，请参阅 [替换整个输入字符串](#substituting-the-entire-input-string)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-129">For more information, see [Substituting the Entire Input String](#substituting-the-entire-input-string).</span></span>|  
  
## <a name="substitution-elements-and-replacement-patterns"></a><span data-ttu-id="daa9d-130">替换元素和替换模式</span><span class="sxs-lookup"><span data-stu-id="daa9d-130">Substitution Elements and Replacement Patterns</span></span>  
 <span data-ttu-id="daa9d-131">替换是替换模式中唯一可识别的特殊构造。</span><span class="sxs-lookup"><span data-stu-id="daa9d-131">Substitutions are the only special constructs recognized in a replacement pattern.</span></span> <span data-ttu-id="daa9d-132">与任何字符匹配的其他正则表达式语言元素（包括字符转义和句点 (`.`)）均不受支持。</span><span class="sxs-lookup"><span data-stu-id="daa9d-132">None of the other regular expression language elements, including character escapes and the period (`.`), which matches any character, are supported.</span></span> <span data-ttu-id="daa9d-133">同样，替换语言元素只能在替换模式中识别，并且在正则表达式模式中永远无效。</span><span class="sxs-lookup"><span data-stu-id="daa9d-133">Similarly, substitution language elements are recognized only in replacement patterns and are never valid in regular expression patterns.</span></span>  
  
 <span data-ttu-id="daa9d-134">可以出现在正则表达式模式或替换中的唯一字符是 `$` 字符，尽管它在每个上下文中具有不同的含义。</span><span class="sxs-lookup"><span data-stu-id="daa9d-134">The only character that can appear either in a regular expression pattern or in a substitution is the `$` character, although it has a different meaning in each context.</span></span> <span data-ttu-id="daa9d-135">在正则表达式模式中， `$` 是与字符串的末尾匹配的定位点。</span><span class="sxs-lookup"><span data-stu-id="daa9d-135">In a regular expression pattern, `$` is an anchor that matches the end of the string.</span></span> <span data-ttu-id="daa9d-136">在替换模式中， `$` 指示替换的开头。</span><span class="sxs-lookup"><span data-stu-id="daa9d-136">In a replacement pattern, `$` indicates the beginning of a substitution.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="daa9d-137">对于类似于正则表达式中替换模式的功能，使用反向引用。</span><span class="sxs-lookup"><span data-stu-id="daa9d-137">For functionality similar to a replacement pattern within a regular expression, use a backreference.</span></span> <span data-ttu-id="daa9d-138">有关反向引用的更多信息，请参见 [反向引用构造](backreference-constructs-in-regular-expressions.md)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-138">For more information about backreferences, see [Backreference Constructs](backreference-constructs-in-regular-expressions.md).</span></span>  

## <a name="substituting-a-numbered-group"></a><span data-ttu-id="daa9d-139">替换已编号的组</span><span class="sxs-lookup"><span data-stu-id="daa9d-139">Substituting a Numbered Group</span></span>  
 <span data-ttu-id="daa9d-140">`$`*number* 语言元素包括替换字符串中 *number* 捕获组所匹配的最后一个子字符串，其中 *number* 是捕获组的索引。</span><span class="sxs-lookup"><span data-stu-id="daa9d-140">The `$`*number* language element includes the last substring matched by the *number* capturing group in the replacement string, where *number* is the index of the capturing group.</span></span> <span data-ttu-id="daa9d-141">例如，替换模式 `$1` 指示匹配的子字符串将由捕获的第一个组替换。</span><span class="sxs-lookup"><span data-stu-id="daa9d-141">For example, the replacement pattern `$1` indicates that the matched substring is to be replaced by the first captured group.</span></span> <span data-ttu-id="daa9d-142">有关为已编号的捕获组的详细信息，请参见 [分组构造](grouping-constructs-in-regular-expressions.md)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-142">For more information about numbered capturing groups, see [Grouping Constructs](grouping-constructs-in-regular-expressions.md).</span></span>  
  
 <span data-ttu-id="daa9d-143">`$` 后面的所有数字解释为属于 *number* 组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-143">All digits that follow `$` are interpreted as belonging to the *number* group.</span></span> <span data-ttu-id="daa9d-144">如果这不是你想要的结果，可改为替换命名组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-144">If this is not your intent, you can substitute a named group instead.</span></span> <span data-ttu-id="daa9d-145">例如，可以使用替换字符串 `${1}1` 而不是 `$11` 来将替换字符串定义为带数字“1”的首个捕获组的值。</span><span class="sxs-lookup"><span data-stu-id="daa9d-145">For example, you can use the replacement string `${1}1` instead of `$11` to define the replacement string as the value of the first captured group along with the number "1".</span></span> <span data-ttu-id="daa9d-146">有关详细信息，请参阅 [替换命名组](#substituting-a-named-group)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-146">For more information, see [Substituting a Named Group](#substituting-a-named-group).</span></span>  
  
 <span data-ttu-id="daa9d-147">没有使用 `(?<`*name*`>)` 语法显式分配的名称的捕获组从左到右进行编号（从 1 开始）。</span><span class="sxs-lookup"><span data-stu-id="daa9d-147">Capturing groups that are not explicitly assigned names using the `(?<`*name*`>)` syntax are numbered from left to right starting at one.</span></span> <span data-ttu-id="daa9d-148">命名组还从左到右进行编号，从比最后一个未命名组的索引大 1 的值开始。</span><span class="sxs-lookup"><span data-stu-id="daa9d-148">Named groups are also numbered from left to right, starting at one greater than the index of the last unnamed group.</span></span> <span data-ttu-id="daa9d-149">例如，在正则表达式 `(\w)(?<digit>\d)`中， `digit` 命名组的索引为 2。</span><span class="sxs-lookup"><span data-stu-id="daa9d-149">For example, in the regular expression `(\w)(?<digit>\d)`, the index of the `digit` named group is 2.</span></span>  
  
 <span data-ttu-id="daa9d-150">如果 *number* 未指定在正则表达式模式中定义的有效捕获组， `$`*number* 将被解释为用于替换每个匹配项的文本字符序列。</span><span class="sxs-lookup"><span data-stu-id="daa9d-150">If *number* does not specify a valid capturing group defined in the regular expression pattern, `$`*number* is interpreted as a literal character sequence that is used to replace each match.</span></span>  
  
 <span data-ttu-id="daa9d-151">下面的示例使用 `$`*number* 替换去除十进制值中的货币符号。</span><span class="sxs-lookup"><span data-stu-id="daa9d-151">The following example uses the `$`*number* substitution to strip the currency symbol from a decimal value.</span></span> <span data-ttu-id="daa9d-152">它移除在货币值的开头或末尾找到的货币符号，并识别两个最常见的小数点分隔符（“.”和“,”）。</span><span class="sxs-lookup"><span data-stu-id="daa9d-152">It removes currency symbols found at the beginning or end of a monetary value, and recognizes the two most common decimal separators ("." and ",").</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Substitutions#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/numberedgroup1.cs#1)]
 [!code-vb[Conceptual.RegEx.Language.Substitutions#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/numberedgroup1.vb#1)]  
  
 <span data-ttu-id="daa9d-153">正则表达式模式 `\p{Sc}*(\s?\d+[.,]?\d*)\p{Sc}*` 的定义如下表所示。</span><span class="sxs-lookup"><span data-stu-id="daa9d-153">The regular expression pattern `\p{Sc}*(\s?\d+[.,]?\d*)\p{Sc}*` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="daa9d-154">模式</span><span class="sxs-lookup"><span data-stu-id="daa9d-154">Pattern</span></span>|<span data-ttu-id="daa9d-155">描述</span><span class="sxs-lookup"><span data-stu-id="daa9d-155">Description</span></span>|  
|-------------|-----------------|  
|`\p{Sc}*`|<span data-ttu-id="daa9d-156">与零个或多个货币符号字符匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-156">Match zero or more currency symbol characters.</span></span>|  
|`\s?`|<span data-ttu-id="daa9d-157">匹配零个或一个空白字符。</span><span class="sxs-lookup"><span data-stu-id="daa9d-157">Match zero or one white-space characters.</span></span>|  
|`\d+`|<span data-ttu-id="daa9d-158">匹配一个或多个十进制数字。</span><span class="sxs-lookup"><span data-stu-id="daa9d-158">Match one or more decimal digits.</span></span>|  
|`[.,]?`|<span data-ttu-id="daa9d-159">与零个或一个句点或逗号匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-159">Match zero or one period or comma.</span></span>|  
|`\d*`|<span data-ttu-id="daa9d-160">匹配零个或多个十进制数字。</span><span class="sxs-lookup"><span data-stu-id="daa9d-160">Match zero or more decimal digits.</span></span>|  
|`(\s?\d+[.,]?\d*)`|<span data-ttu-id="daa9d-161">匹配空白，后跟一个或多个十进制数，再后跟零个或一个句点或逗号，后跟零个或多个十进制数。</span><span class="sxs-lookup"><span data-stu-id="daa9d-161">Match a white space followed by one or more decimal digits, followed by zero or one period or comma, followed by zero or more decimal digits.</span></span> <span data-ttu-id="daa9d-162">这是第一个捕获组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-162">This is the first capturing group.</span></span> <span data-ttu-id="daa9d-163">因为替换模式为 `$1`，所以调用 <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> 方法会将整个匹配的子字符串替换为此捕获组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-163">Because the replacement pattern is `$1`, the call to the <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> method replaces the entire matched substring with this captured group.</span></span>|  

## <a name="substituting-a-named-group"></a><span data-ttu-id="daa9d-164">替换命名组</span><span class="sxs-lookup"><span data-stu-id="daa9d-164">Substituting a Named Group</span></span>  
 <span data-ttu-id="daa9d-165">`${`*name*`}` 语言元素替换 *name* 捕获组匹配的最后一个子字符串，其中 *name* 是 `(?<`*name*`>)` 语言元素所定义的捕获组名称。</span><span class="sxs-lookup"><span data-stu-id="daa9d-165">The `${`*name*`}` language element substitutes the last substring matched by the *name* capturing group, where *name* is the name of a capturing group defined by the `(?<`*name*`>)` language element.</span></span> <span data-ttu-id="daa9d-166">有关命名的捕获组的详细信息，请参见 [分组构造](grouping-constructs-in-regular-expressions.md)。</span><span class="sxs-lookup"><span data-stu-id="daa9d-166">For more information about named capturing groups, see [Grouping Constructs](grouping-constructs-in-regular-expressions.md).</span></span>  
  
 <span data-ttu-id="daa9d-167">如果 *name* 未指定正则表达式模式中定义的有效的命名捕获组但包含数字，则 `${`*name*`}` 被解释为已编号的组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-167">If *name* doesn't specify a valid named capturing group defined in the regular expression pattern but consists of digits, `${`*name*`}` is interpreted as a numbered group.</span></span>  
  
 <span data-ttu-id="daa9d-168">如果 *name* 既未指定有效的命名捕获组也未指定正则表达式模式中定义的有效的已编号捕获组，则 `${`*name*`}` 被解释为用于替换每个匹配的文本字符序列。</span><span class="sxs-lookup"><span data-stu-id="daa9d-168">If *name* specifies neither a valid named capturing group nor a valid numbered capturing group defined in the regular expression pattern, `${`*name*`}` is interpreted as a literal character sequence that is used to replace each match.</span></span>  
  
 <span data-ttu-id="daa9d-169">下面的示例使用 `${`*name*`}` 替换去除十进制值中的货币符号。</span><span class="sxs-lookup"><span data-stu-id="daa9d-169">The following example uses the `${`*name*`}` substitution to strip the currency symbol from a decimal value.</span></span> <span data-ttu-id="daa9d-170">它移除在货币值的开头或末尾找到的货币符号，并识别两个最常见的小数点分隔符（“.”和“,”）。</span><span class="sxs-lookup"><span data-stu-id="daa9d-170">It removes currency symbols found at the beginning or end of a monetary value, and recognizes the two most common decimal separators ("." and ",").</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Substitutions#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/namedgroup1.cs#2)]
 [!code-vb[Conceptual.RegEx.Language.Substitutions#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/namedgroup1.vb#2)]  
  
 <span data-ttu-id="daa9d-171">正则表达式模式 `\p{Sc}*(?<amount>\s?\d[.,]?\d*)\p{Sc}*` 的定义如下表所示。</span><span class="sxs-lookup"><span data-stu-id="daa9d-171">The regular expression pattern `\p{Sc}*(?<amount>\s?\d[.,]?\d*)\p{Sc}*` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="daa9d-172">模式</span><span class="sxs-lookup"><span data-stu-id="daa9d-172">Pattern</span></span>|<span data-ttu-id="daa9d-173">描述</span><span class="sxs-lookup"><span data-stu-id="daa9d-173">Description</span></span>|  
|-------------|-----------------|  
|`\p{Sc}*`|<span data-ttu-id="daa9d-174">与零个或多个货币符号字符匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-174">Match zero or more currency symbol characters.</span></span>|  
|`\s?`|<span data-ttu-id="daa9d-175">匹配零个或一个空白字符。</span><span class="sxs-lookup"><span data-stu-id="daa9d-175">Match zero or one white-space characters.</span></span>|  
|`\d+`|<span data-ttu-id="daa9d-176">匹配一个或多个十进制数字。</span><span class="sxs-lookup"><span data-stu-id="daa9d-176">Match one or more decimal digits.</span></span>|  
|`[.,]?`|<span data-ttu-id="daa9d-177">与零个或一个句点或逗号匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-177">Match zero or one period or comma.</span></span>|  
|`\d*`|<span data-ttu-id="daa9d-178">匹配零个或多个十进制数字。</span><span class="sxs-lookup"><span data-stu-id="daa9d-178">Match zero or more decimal digits.</span></span>|  
|`(?<amount>\s?\d[.,]?\d*)`|<span data-ttu-id="daa9d-179">匹配空白，后跟一个或多个十进制数，再后跟零个或一个句点或逗号，后跟零个或多个十进制数。</span><span class="sxs-lookup"><span data-stu-id="daa9d-179">Match a white space, followed by one or more decimal digits, followed by zero or one period or comma, followed by zero or more decimal digits.</span></span> <span data-ttu-id="daa9d-180">这是名为 `amount`的捕获组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-180">This is the capturing group named `amount`.</span></span> <span data-ttu-id="daa9d-181">因为替换模式为 `${amount}`，所以调用 <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> 方法会将整个匹配的子字符串替换为此捕获组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-181">Because the replacement pattern is `${amount}`, the call to the <xref:System.Text.RegularExpressions.Regex.Replace%2A?displayProperty=nameWithType> method replaces the entire matched substring with this captured group.</span></span>|  

## <a name="substituting-a--character"></a><span data-ttu-id="daa9d-182">替换“$”字符</span><span class="sxs-lookup"><span data-stu-id="daa9d-182">Substituting a "$" Character</span></span>  
 <span data-ttu-id="daa9d-183">`$$` 替换将在替换的字符串中插入文本“$”字符。</span><span class="sxs-lookup"><span data-stu-id="daa9d-183">The `$$` substitution inserts a literal "$" character in the replaced string.</span></span>  
  
 <span data-ttu-id="daa9d-184">下面的示例使用 <xref:System.Globalization.NumberFormatInfo> 对象确定当前区域性的货币符号及其在货币字符串中的位置。</span><span class="sxs-lookup"><span data-stu-id="daa9d-184">The following example uses the <xref:System.Globalization.NumberFormatInfo> object to determine the current culture's currency symbol and its placement in a currency string.</span></span> <span data-ttu-id="daa9d-185">然后，它动态构建一个正则表达式模式和一个替换模式。</span><span class="sxs-lookup"><span data-stu-id="daa9d-185">It then builds both a regular expression pattern and a replacement pattern dynamically.</span></span> <span data-ttu-id="daa9d-186">如果示例在当前区域性为 en-US 的计算机上运行，则它将生成正则表达式模式 `\b(\d+)(\.(\d+))?` 和替换模式 `$$ $1$2`。</span><span class="sxs-lookup"><span data-stu-id="daa9d-186">If the example is run on a computer whose current culture is en-US, it generates the regular expression pattern `\b(\d+)(\.(\d+))?` and the replacement pattern `$$ $1$2`.</span></span> <span data-ttu-id="daa9d-187">替换模式将匹配的文本替换为一个后跟第一个和第二个捕获组的货币符号和空格。</span><span class="sxs-lookup"><span data-stu-id="daa9d-187">The replacement pattern replaces the matched text with a currency symbol and a space followed by the first and second captured groups.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/dollarsign1.cs#8)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/dollarsign1.vb#8)]  
  
 <span data-ttu-id="daa9d-188">正则表达式模式 `\b(\d+)(\.(\d+))?` 的定义如下表所示。</span><span class="sxs-lookup"><span data-stu-id="daa9d-188">The regular expression pattern `\b(\d+)(\.(\d+))?` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="daa9d-189">模式</span><span class="sxs-lookup"><span data-stu-id="daa9d-189">Pattern</span></span>|<span data-ttu-id="daa9d-190">描述</span><span class="sxs-lookup"><span data-stu-id="daa9d-190">Description</span></span>|  
|-------------|-----------------|  
|`\b`|<span data-ttu-id="daa9d-191">从字边界开始进行匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-191">Start the match at the beginning of a word boundary.</span></span>|  
|`(\d+)`|<span data-ttu-id="daa9d-192">匹配一个或多个十进制数字。</span><span class="sxs-lookup"><span data-stu-id="daa9d-192">Match one or more decimal digits.</span></span> <span data-ttu-id="daa9d-193">这是第一个捕获组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-193">This is the first capturing group.</span></span>|  
|`\.`|<span data-ttu-id="daa9d-194">与句点（小数点分隔符）匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-194">Match a period (the decimal separator).</span></span>|  
|`(\d+)`|<span data-ttu-id="daa9d-195">匹配一个或多个十进制数字。</span><span class="sxs-lookup"><span data-stu-id="daa9d-195">Match one or more decimal digits.</span></span> <span data-ttu-id="daa9d-196">这是第三个捕获组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-196">This is the third capturing group.</span></span>|  
|`(\.(\d+))?`|<span data-ttu-id="daa9d-197">与零个或一个后跟一个或多个十进制数字的句点匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-197">Match zero or one occurrence of a period followed by one or more decimal digits.</span></span> <span data-ttu-id="daa9d-198">这是第二个捕获组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-198">This is the second capturing group.</span></span>|  

## <a name="substituting-the-entire-match"></a><span data-ttu-id="daa9d-199">替换整个匹配项</span><span class="sxs-lookup"><span data-stu-id="daa9d-199">Substituting the Entire Match</span></span>  
 <span data-ttu-id="daa9d-200">`$&` 替换包括替换字符串中的整个匹配项。</span><span class="sxs-lookup"><span data-stu-id="daa9d-200">The `$&` substitution includes the entire match in the replacement string.</span></span> <span data-ttu-id="daa9d-201">通常，它用于将子字符串添加至匹配字符串的开头或末尾。</span><span class="sxs-lookup"><span data-stu-id="daa9d-201">Often, it is used to add a substring to the beginning or end of the matched string.</span></span> <span data-ttu-id="daa9d-202">例如， `($&)` 替换模式向每个匹配项的开头和结尾添加括号。</span><span class="sxs-lookup"><span data-stu-id="daa9d-202">For example, the `($&)` replacement pattern adds parentheses to the beginning and end of each match.</span></span> <span data-ttu-id="daa9d-203">如果没有匹配项，则 `$&` 替换将不起作用。</span><span class="sxs-lookup"><span data-stu-id="daa9d-203">If there is no match, the `$&` substitution has no effect.</span></span>  
  
 <span data-ttu-id="daa9d-204">下面的示例使用 `$&` 替换在存储于字符串数组中的书名的开头和结尾添加引号。</span><span class="sxs-lookup"><span data-stu-id="daa9d-204">The following example uses the `$&` substitution to add quotation marks at the beginning and end of book titles stored in a string array.</span></span>  
  
 [!code-csharp[Conceptual.RegEx.Language.Substitutions#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/entirematch1.cs#3)]
 [!code-vb[Conceptual.RegEx.Language.Substitutions#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/entirematch1.vb#3)]  
  
 <span data-ttu-id="daa9d-205">正则表达式模式 `^(\w+\s?)+$` 的定义如下表所示。</span><span class="sxs-lookup"><span data-stu-id="daa9d-205">The regular expression pattern `^(\w+\s?)+$` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="daa9d-206">模式</span><span class="sxs-lookup"><span data-stu-id="daa9d-206">Pattern</span></span>|<span data-ttu-id="daa9d-207">描述</span><span class="sxs-lookup"><span data-stu-id="daa9d-207">Description</span></span>|  
|-------------|-----------------|  
|`^`|<span data-ttu-id="daa9d-208">从输入字符串的开头部分开始匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-208">Start the match at the beginning of the input string.</span></span>|  
|`(\w+\s?)+`|<span data-ttu-id="daa9d-209">匹配一个或多个单词字符后跟零个或一个空白字符的模式一次或多次。</span><span class="sxs-lookup"><span data-stu-id="daa9d-209">Match the pattern of one or more word characters followed by zero or one white-space characters one or more times.</span></span>|  
|`$`|<span data-ttu-id="daa9d-210">匹配输入字符串的末尾部分。</span><span class="sxs-lookup"><span data-stu-id="daa9d-210">Match the end of the input string.</span></span>|  
  
 <span data-ttu-id="daa9d-211">`"$&"` 替换模式将文本引号添加到每个匹配项的开头和结尾。</span><span class="sxs-lookup"><span data-stu-id="daa9d-211">The `"$&"` replacement pattern adds a literal quotation mark to the beginning and end of each match.</span></span>  

## <a name="substituting-the-text-before-the-match"></a><span data-ttu-id="daa9d-212">替换匹配项前的文本</span><span class="sxs-lookup"><span data-stu-id="daa9d-212">Substituting the Text Before the Match</span></span>  
 <span data-ttu-id="daa9d-213">``$` `` 替换将匹配的字符串替换为匹配项前面的整个输入字符串。</span><span class="sxs-lookup"><span data-stu-id="daa9d-213">The ``$` `` substitution replaces the matched string with the entire input string before the match.</span></span> <span data-ttu-id="daa9d-214">即，它将在删除匹配的文本时重复输入字符串，直至匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-214">That is, it duplicates the input string up to the match while removing the matched text.</span></span> <span data-ttu-id="daa9d-215">匹配文本后面的任何文本在结果字符串中保持不变。</span><span class="sxs-lookup"><span data-stu-id="daa9d-215">Any text that follows the matched text is unchanged in the result string.</span></span> <span data-ttu-id="daa9d-216">如果输入字符串中有多个匹配项，则替换文本将派生自原始输入字符串，而不是派生自文本已由早期匹配项替换的字符串。</span><span class="sxs-lookup"><span data-stu-id="daa9d-216">If there are multiple matches in an input string, the replacement text is derived from the original input string, rather than from the string in which text has been replaced by earlier matches.</span></span> <span data-ttu-id="daa9d-217">\(说明如示例所示。\)如果没有匹配项，则 ``$` `` 替换将不起作用。</span><span class="sxs-lookup"><span data-stu-id="daa9d-217">\(The example provides an illustration.\) If there is no match, the ``$` `` substitution has no effect.</span></span>  
  
 <span data-ttu-id="daa9d-218">下面的示例使用正则表达式模式 `\d+` 来匹配输入字符串中一个或多个十进制数字的序列。</span><span class="sxs-lookup"><span data-stu-id="daa9d-218">The following example uses the regular expression pattern `\d+` to match a sequence of one or more decimal digits in the input string.</span></span> <span data-ttu-id="daa9d-219">替换字符串 ``$` `` 将这些数字替换为该匹配项前的文本。</span><span class="sxs-lookup"><span data-stu-id="daa9d-219">The replacement string ``$` `` replaces these digits with the text that precedes the match.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/before1.cs#4)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/before1.vb#4)]  
  
 <span data-ttu-id="daa9d-220">在此示例中，输入字符串 `"aa1bb2cc3dd4ee5"` 包含五个匹配项。</span><span class="sxs-lookup"><span data-stu-id="daa9d-220">In this example, the input string `"aa1bb2cc3dd4ee5"` contains five matches.</span></span> <span data-ttu-id="daa9d-221">下表说明了 ``$` `` 替换如何使正则表达式引擎替换输入字符串中的每个匹配项。</span><span class="sxs-lookup"><span data-stu-id="daa9d-221">The following table illustrates how the ``$` `` substitution causes the regular expression engine to replace each match in the input string.</span></span> <span data-ttu-id="daa9d-222">插入文本在结果列中以粗体显示。</span><span class="sxs-lookup"><span data-stu-id="daa9d-222">Inserted text is shown in bold in the results column.</span></span>  
  
|<span data-ttu-id="daa9d-223">匹配</span><span class="sxs-lookup"><span data-stu-id="daa9d-223">Match</span></span>|<span data-ttu-id="daa9d-224">位置</span><span class="sxs-lookup"><span data-stu-id="daa9d-224">Position</span></span>|<span data-ttu-id="daa9d-225">匹配项前的字符串</span><span class="sxs-lookup"><span data-stu-id="daa9d-225">String before match</span></span>|<span data-ttu-id="daa9d-226">结果字符串</span><span class="sxs-lookup"><span data-stu-id="daa9d-226">Result string</span></span>|  
|-----------|--------------|-------------------------|-------------------|  
|<span data-ttu-id="daa9d-227">1</span><span class="sxs-lookup"><span data-stu-id="daa9d-227">1</span></span>|<span data-ttu-id="daa9d-228">2</span><span class="sxs-lookup"><span data-stu-id="daa9d-228">2</span></span>|<span data-ttu-id="daa9d-229">aa</span><span class="sxs-lookup"><span data-stu-id="daa9d-229">aa</span></span>|<span data-ttu-id="daa9d-230">aa**aa**bb2cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-230">aa**aa**bb2cc3dd4ee5</span></span>|  
|<span data-ttu-id="daa9d-231">2</span><span class="sxs-lookup"><span data-stu-id="daa9d-231">2</span></span>|<span data-ttu-id="daa9d-232">5</span><span class="sxs-lookup"><span data-stu-id="daa9d-232">5</span></span>|<span data-ttu-id="daa9d-233">aa1bb</span><span class="sxs-lookup"><span data-stu-id="daa9d-233">aa1bb</span></span>|<span data-ttu-id="daa9d-234">aaaabb**aa1bb**cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-234">aaaabb**aa1bb**cc3dd4ee5</span></span>|  
|<span data-ttu-id="daa9d-235">3</span><span class="sxs-lookup"><span data-stu-id="daa9d-235">3</span></span>|<span data-ttu-id="daa9d-236">8</span><span class="sxs-lookup"><span data-stu-id="daa9d-236">8</span></span>|<span data-ttu-id="daa9d-237">aa1bb2cc</span><span class="sxs-lookup"><span data-stu-id="daa9d-237">aa1bb2cc</span></span>|<span data-ttu-id="daa9d-238">aaaabbaa1bbcc**aa1bb2cc**dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-238">aaaabbaa1bbcc**aa1bb2cc**dd4ee5</span></span>|  
|<span data-ttu-id="daa9d-239">4</span><span class="sxs-lookup"><span data-stu-id="daa9d-239">4</span></span>|<span data-ttu-id="daa9d-240">11</span><span class="sxs-lookup"><span data-stu-id="daa9d-240">11</span></span>|<span data-ttu-id="daa9d-241">aa1bb2cc3dd</span><span class="sxs-lookup"><span data-stu-id="daa9d-241">aa1bb2cc3dd</span></span>|<span data-ttu-id="daa9d-242">aaaabbaa1bbccaa1bb2ccdd**aa1bb2cc3dd**ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-242">aaaabbaa1bbccaa1bb2ccdd**aa1bb2cc3dd**ee5</span></span>|  
|<span data-ttu-id="daa9d-243">5</span><span class="sxs-lookup"><span data-stu-id="daa9d-243">5</span></span>|<span data-ttu-id="daa9d-244">14</span><span class="sxs-lookup"><span data-stu-id="daa9d-244">14</span></span>|<span data-ttu-id="daa9d-245">aa1bb2cc3dd4ee</span><span class="sxs-lookup"><span data-stu-id="daa9d-245">aa1bb2cc3dd4ee</span></span>|<span data-ttu-id="daa9d-246">aaaabbaa1bbccaa1bb2ccddaa1bb2cc3ddee**aa1bb2cc3dd4ee**</span><span class="sxs-lookup"><span data-stu-id="daa9d-246">aaaabbaa1bbccaa1bb2ccddaa1bb2cc3ddee**aa1bb2cc3dd4ee**</span></span>|

## <a name="substituting-the-text-after-the-match"></a><span data-ttu-id="daa9d-247">替换匹配项后的文本</span><span class="sxs-lookup"><span data-stu-id="daa9d-247">Substituting the Text After the Match</span></span>  
 <span data-ttu-id="daa9d-248">`$'` 替换将匹配的字符串替换为匹配项后的整个输入字符串。</span><span class="sxs-lookup"><span data-stu-id="daa9d-248">The `$'` substitution replaces the matched string with the entire input string after the match.</span></span> <span data-ttu-id="daa9d-249">即，它将在删除匹配的文本时重复匹配项后的输入字符串。</span><span class="sxs-lookup"><span data-stu-id="daa9d-249">That is, it duplicates the input string after the match while removing the matched text.</span></span> <span data-ttu-id="daa9d-250">匹配文本前面的任何文本在结果字符串中保持不变。</span><span class="sxs-lookup"><span data-stu-id="daa9d-250">Any text that precedes the matched text is unchanged in the result string.</span></span> <span data-ttu-id="daa9d-251">如果没有匹配项，则  `$'` 替换将不起作用。</span><span class="sxs-lookup"><span data-stu-id="daa9d-251">If there is no match, the  `$'` substitution has no effect.</span></span>  
  
 <span data-ttu-id="daa9d-252">下面的示例使用正则表达式模式 `\d+` 来匹配输入字符串中一个或多个十进制数字的序列。</span><span class="sxs-lookup"><span data-stu-id="daa9d-252">The following example uses the regular expression pattern `\d+` to match a sequence of one or more decimal digits in the input string.</span></span> <span data-ttu-id="daa9d-253">替换字符串 `$'` 将这些数字替换为匹配项后的文本。</span><span class="sxs-lookup"><span data-stu-id="daa9d-253">The replacement string `$'` replaces these digits with the text that follows the match.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/after1.cs#5)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/after1.vb#5)]  
  
 <span data-ttu-id="daa9d-254">在此示例中，输入字符串 `"aa1bb2cc3dd4ee5"` 包含五个匹配项。</span><span class="sxs-lookup"><span data-stu-id="daa9d-254">In this example, the input string `"aa1bb2cc3dd4ee5"` contains five matches.</span></span> <span data-ttu-id="daa9d-255">下表说明了 `$'` 替换如何使正则表达式引擎替换输入字符串中的每个匹配项。</span><span class="sxs-lookup"><span data-stu-id="daa9d-255">The following table illustrates how the `$'` substitution causes the regular expression engine to replace each match in the input string.</span></span> <span data-ttu-id="daa9d-256">插入文本在结果列中以粗体显示。</span><span class="sxs-lookup"><span data-stu-id="daa9d-256">Inserted text is shown in bold in the results column.</span></span>  
  
|<span data-ttu-id="daa9d-257">匹配</span><span class="sxs-lookup"><span data-stu-id="daa9d-257">Match</span></span>|<span data-ttu-id="daa9d-258">位置</span><span class="sxs-lookup"><span data-stu-id="daa9d-258">Position</span></span>|<span data-ttu-id="daa9d-259">匹配项后的字符串</span><span class="sxs-lookup"><span data-stu-id="daa9d-259">String after match</span></span>|<span data-ttu-id="daa9d-260">结果字符串</span><span class="sxs-lookup"><span data-stu-id="daa9d-260">Result string</span></span>|  
|-----------|--------------|------------------------|-------------------|  
|<span data-ttu-id="daa9d-261">1</span><span class="sxs-lookup"><span data-stu-id="daa9d-261">1</span></span>|<span data-ttu-id="daa9d-262">2</span><span class="sxs-lookup"><span data-stu-id="daa9d-262">2</span></span>|<span data-ttu-id="daa9d-263">bb2cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-263">bb2cc3dd4ee5</span></span>|<span data-ttu-id="daa9d-264">aa**bb2cc3dd4ee5**bb2cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-264">aa**bb2cc3dd4ee5**bb2cc3dd4ee5</span></span>|  
|<span data-ttu-id="daa9d-265">2</span><span class="sxs-lookup"><span data-stu-id="daa9d-265">2</span></span>|<span data-ttu-id="daa9d-266">5</span><span class="sxs-lookup"><span data-stu-id="daa9d-266">5</span></span>|<span data-ttu-id="daa9d-267">cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-267">cc3dd4ee5</span></span>|<span data-ttu-id="daa9d-268">aabb2cc3dd4ee5bb**cc3dd4ee5**cc3dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-268">aabb2cc3dd4ee5bb**cc3dd4ee5**cc3dd4ee5</span></span>|  
|<span data-ttu-id="daa9d-269">3</span><span class="sxs-lookup"><span data-stu-id="daa9d-269">3</span></span>|<span data-ttu-id="daa9d-270">8</span><span class="sxs-lookup"><span data-stu-id="daa9d-270">8</span></span>|<span data-ttu-id="daa9d-271">dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-271">dd4ee5</span></span>|<span data-ttu-id="daa9d-272">aabb2cc3dd4ee5bbcc3dd4ee5cc**dd4ee5**dd4ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-272">aabb2cc3dd4ee5bbcc3dd4ee5cc**dd4ee5**dd4ee5</span></span>|  
|<span data-ttu-id="daa9d-273">4</span><span class="sxs-lookup"><span data-stu-id="daa9d-273">4</span></span>|<span data-ttu-id="daa9d-274">11</span><span class="sxs-lookup"><span data-stu-id="daa9d-274">11</span></span>|<span data-ttu-id="daa9d-275">ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-275">ee5</span></span>|<span data-ttu-id="daa9d-276">aabb2cc3dd4ee5bbcc3dd4ee5ccdd4ee5dd**ee5**ee5</span><span class="sxs-lookup"><span data-stu-id="daa9d-276">aabb2cc3dd4ee5bbcc3dd4ee5ccdd4ee5dd**ee5**ee5</span></span>|  
|<span data-ttu-id="daa9d-277">5</span><span class="sxs-lookup"><span data-stu-id="daa9d-277">5</span></span>|<span data-ttu-id="daa9d-278">14</span><span class="sxs-lookup"><span data-stu-id="daa9d-278">14</span></span>|<xref:System.String.Empty?displayProperty=nameWithType>|<span data-ttu-id="daa9d-279">aabb2cc3dd4ee5bbcc3dd4ee5ccdd4ee5ddee5ee</span><span class="sxs-lookup"><span data-stu-id="daa9d-279">aabb2cc3dd4ee5bbcc3dd4ee5ccdd4ee5ddee5ee</span></span>|  

## <a name="substituting-the-last-captured-group"></a><span data-ttu-id="daa9d-280">替换最后捕获的组</span><span class="sxs-lookup"><span data-stu-id="daa9d-280">Substituting the Last Captured Group</span></span>  
 <span data-ttu-id="daa9d-281">`$+` 替换将匹配的字符串替换为最后捕获的组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-281">The `$+` substitution replaces the matched string with the last captured group.</span></span> <span data-ttu-id="daa9d-282">如果没有捕获组，或者最后的捕获组的值是 <xref:System.String.Empty?displayProperty=nameWithType>，则 `$+` 替换将不起作用。</span><span class="sxs-lookup"><span data-stu-id="daa9d-282">If there are no captured groups or if the value of the last captured group is <xref:System.String.Empty?displayProperty=nameWithType>, the `$+` substitution has no effect.</span></span>  
  
 <span data-ttu-id="daa9d-283">下面的示例标识字符串中的重复单词，并使用 `$+` 替换将其替换为该单词的单一匹配项。</span><span class="sxs-lookup"><span data-stu-id="daa9d-283">The following example identifies duplicate words in a string and uses the `$+` substitution to replace them with a single occurrence of the word.</span></span> <span data-ttu-id="daa9d-284"><xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> 选项用于确保大小写不同但其他内容都相同的单词被认为是重复的。</span><span class="sxs-lookup"><span data-stu-id="daa9d-284">The <xref:System.Text.RegularExpressions.RegexOptions.IgnoreCase?displayProperty=nameWithType> option is used to ensure that words that differ in case but that are otherwise identical are considered duplicates.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/lastmatch1.cs#6)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/lastmatch1.vb#6)]  
  
 <span data-ttu-id="daa9d-285">正则表达式模式 `\b(\w+)\s\1\b` 的定义如下表所示。</span><span class="sxs-lookup"><span data-stu-id="daa9d-285">The regular expression pattern `\b(\w+)\s\1\b` is defined as shown in the following table.</span></span>  
  
|<span data-ttu-id="daa9d-286">模式</span><span class="sxs-lookup"><span data-stu-id="daa9d-286">Pattern</span></span>|<span data-ttu-id="daa9d-287">描述</span><span class="sxs-lookup"><span data-stu-id="daa9d-287">Description</span></span>|  
|-------------|-----------------|  
|`\b`|<span data-ttu-id="daa9d-288">在单词边界处开始匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-288">Begin the match at a word boundary.</span></span>|  
|`(\w+)`|<span data-ttu-id="daa9d-289">匹配一个或多个单词字符。</span><span class="sxs-lookup"><span data-stu-id="daa9d-289">Match one or more word characters.</span></span> <span data-ttu-id="daa9d-290">这是第一个捕获组。</span><span class="sxs-lookup"><span data-stu-id="daa9d-290">This is the first capturing group.</span></span>|  
|`\s`|<span data-ttu-id="daa9d-291">与空白字符匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-291">Match a white-space character.</span></span>|  
|`\1`|<span data-ttu-id="daa9d-292">与第一个捕获的组匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-292">Match the first captured group.</span></span>|  
|`\b`|<span data-ttu-id="daa9d-293">在单词边界处结束匹配。</span><span class="sxs-lookup"><span data-stu-id="daa9d-293">End the match at a word boundary.</span></span>|  

## <a name="substituting-the-entire-input-string"></a><span data-ttu-id="daa9d-294">替换整个输入字符串</span><span class="sxs-lookup"><span data-stu-id="daa9d-294">Substituting the Entire Input String</span></span>  
 <span data-ttu-id="daa9d-295">`$_` 替换将匹配的字符串替换为整个输入字符。</span><span class="sxs-lookup"><span data-stu-id="daa9d-295">The `$_` substitution replaces the matched string with the entire input string.</span></span> <span data-ttu-id="daa9d-296">即，它将删除匹配的文本并将其替换为整个字符串（包括匹配的文本）。</span><span class="sxs-lookup"><span data-stu-id="daa9d-296">That is, it removes the matched text and replaces it with the entire string, including the matched text.</span></span>  
  
 <span data-ttu-id="daa9d-297">下面的示例匹配输入字符串中的一个或多个十进制数字。</span><span class="sxs-lookup"><span data-stu-id="daa9d-297">The following example matches one or more decimal digits in the input string.</span></span> <span data-ttu-id="daa9d-298">它使用 `$_` 替换来将其替换为整个输入字符串。</span><span class="sxs-lookup"><span data-stu-id="daa9d-298">It uses the `$_` substitution to replace them with the entire input string.</span></span>  
  
 [!code-csharp[Conceptual.Regex.Language.Substitutions#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.regex.language.substitutions/cs/entire1.cs#7)]
 [!code-vb[Conceptual.Regex.Language.Substitutions#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.regex.language.substitutions/vb/entire1.vb#7)]  
  
 <span data-ttu-id="daa9d-299">在此示例中，输入字符串 `"ABC123DEF456"` 包含两个匹配项。</span><span class="sxs-lookup"><span data-stu-id="daa9d-299">In this example, the input string `"ABC123DEF456"` contains two matches.</span></span> <span data-ttu-id="daa9d-300">下表说明了 `$_` 替换如何使正则表达式引擎替换输入字符串中的每个匹配项。</span><span class="sxs-lookup"><span data-stu-id="daa9d-300">The following table illustrates how the `$_` substitution causes the regular expression engine to replace each match in the input string.</span></span> <span data-ttu-id="daa9d-301">插入文本在结果列中以粗体显示。</span><span class="sxs-lookup"><span data-stu-id="daa9d-301">Inserted text is shown in bold in the results column.</span></span>  
  
|<span data-ttu-id="daa9d-302">匹配</span><span class="sxs-lookup"><span data-stu-id="daa9d-302">Match</span></span>|<span data-ttu-id="daa9d-303">位置</span><span class="sxs-lookup"><span data-stu-id="daa9d-303">Position</span></span>|<span data-ttu-id="daa9d-304">匹配</span><span class="sxs-lookup"><span data-stu-id="daa9d-304">Match</span></span>|<span data-ttu-id="daa9d-305">结果字符串</span><span class="sxs-lookup"><span data-stu-id="daa9d-305">Result string</span></span>|  
|-----------|--------------|-----------|-------------------|  
|<span data-ttu-id="daa9d-306">1</span><span class="sxs-lookup"><span data-stu-id="daa9d-306">1</span></span>|<span data-ttu-id="daa9d-307">3</span><span class="sxs-lookup"><span data-stu-id="daa9d-307">3</span></span>|<span data-ttu-id="daa9d-308">123</span><span class="sxs-lookup"><span data-stu-id="daa9d-308">123</span></span>|<span data-ttu-id="daa9d-309">ABC**ABC123DEF456**DEF456</span><span class="sxs-lookup"><span data-stu-id="daa9d-309">ABC**ABC123DEF456**DEF456</span></span>|  
|<span data-ttu-id="daa9d-310">2</span><span class="sxs-lookup"><span data-stu-id="daa9d-310">2</span></span>|<span data-ttu-id="daa9d-311">5</span><span class="sxs-lookup"><span data-stu-id="daa9d-311">5</span></span>|<span data-ttu-id="daa9d-312">456</span><span class="sxs-lookup"><span data-stu-id="daa9d-312">456</span></span>|<span data-ttu-id="daa9d-313">ABCABC123DEF456DEF**ABC123DEF456**</span><span class="sxs-lookup"><span data-stu-id="daa9d-313">ABCABC123DEF456DEF**ABC123DEF456**</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="daa9d-314">请参阅</span><span class="sxs-lookup"><span data-stu-id="daa9d-314">See also</span></span>

- [<span data-ttu-id="daa9d-315">正则表达式语言 - 快速参考</span><span class="sxs-lookup"><span data-stu-id="daa9d-315">Regular Expression Language - Quick Reference</span></span>](regular-expression-language-quick-reference.md)
